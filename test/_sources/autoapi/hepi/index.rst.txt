:py:mod:`hepi`
==============

.. py:module:: hepi


Subpackages
-----------
.. toctree::
   :titlesonly:
   :maxdepth: 3

   cluster/index.rst
   madgraph/index.rst
   resummino/index.rst
   spheno/index.rst


Submodules
----------
.. toctree::
   :titlesonly:
   :maxdepth: 1

   input/index.rst
   plot/index.rst
   results/index.rst
   util/index.rst


Package Contents
----------------

Classes
~~~~~~~

.. autoapisummary::

   hepi.Order
   hepi.Input
   hepi.Result
   hepi.Input



Functions
~~~~~~~~~

.. autoapisummary::

   hepi.get_LR_partner
   hepi.lhapdf_name_to_id
   hepi.namehash
   hepi.get_input_dir
   hepi.get_output_dir
   hepi.get_pre
   hepi.set_input_dir
   hepi.set_output_dir
   hepi.set_pre
   hepi.update_slha
   hepi.scan
   hepi.scale_scan
   hepi.seven_point_scan
   hepi.pdf_scan
   hepi.change_where
   hepi.scan_invariant_mass
   hepi.mass_scan
   hepi.slha_scan
   hepi.slha_scan_rel
   hepi.LD2DL
   hepi.pdf_error
   hepi.scale_error
   hepi.combine_errors
   hepi.LD2DL
   hepi.get_name
   hepi.get_LR_partner
   hepi.namehash
   hepi.lhapdf_id_to_name
   hepi.lhapdf_name_to_id
   hepi.get_input_dir
   hepi.get_name
   hepi.tex_table
   hepi.title
   hepi.energy_plot
   hepi.combined_energy_plot
   hepi.combined_plot
   hepi.get_mass
   hepi.mass_plot
   hepi.mass_vplot
   hepi.plot
   hepi.index_open
   hepi.slha_data
   hepi.slha_plot
   hepi.vplot
   hepi.mass_mapplot
   hepi.mapplot
   hepi.map_vplot
   hepi.err_plt
   hepi.scale_plot
   hepi.central_scale_plot
   hepi.mass_and_K_plot
   hepi.mass_and_ratio_plot



Attributes
~~~~~~~~~~

.. autoapisummary::

   hepi.in_dir
   hepi.out_dir
   hepi.pre
   hepi.required_numerical_uncertainty_factor
   hepi.lhapdf_id_name
   hepi.lhapdf_name_id
   hepi.fig
   hepi.axs
   hepi.lines
   hepi.labels
   hepi.package
   hepi.version
   hepi.__version__


.. py:function:: get_LR_partner(id: int) -> Tuple[int, int]

   Transforms a PDG id to it's left-right partner.

   :param id: PDG Monte Carlo identifier for the particle.
   :type id: int

   :returns: First int is -1 for Left and 1 for Right. Second int is the PDG id.
   :rtype: tuple

   .. rubric:: Examples

   >>> get_LR_partner(1000002)
   (-1, 2000002)


.. py:function:: lhapdf_name_to_id(name: str) -> int

   Converts a LHAPDF name to the sets id.

   :param name: LHAPDF set name.
   :type name: str

   :returns: id of the LHAPDF set.
   :rtype: int

   .. rubric:: Examples

   >>> lhapdf_name_to_id("EPPS16_B_90CL_Au_hess")
   30101175


.. py:function:: namehash(n: any) -> str

   Creates a sha256 hash from the objects string representation.

   :param n: object.
   :type n: any

   :returns: sha256 of object.
   :rtype: str

   .. rubric:: Examples

   >>> p = {'a':1,'b':2}
   >>> str(p)
   "{'a': 1, 'b': 2}"
   >>> namehash(str(p))
   '3dffaea891e5dbadb390da33bad65f509dd667779330e2720df8165a253462b8'
   >>> namehash(p)
   '3dffaea891e5dbadb390da33bad65f509dd667779330e2720df8165a253462b8'


.. py:data:: in_dir
   :annotation: = ./input/

   Input directory.

.. py:data:: out_dir
   :annotation: = ./output/

   Output directory.

.. py:data:: pre
   :annotation: = nice -n 5

   Prefix for run commands.

.. py:function:: get_input_dir()

   Get the input directory.

   :returns: :attr:`in_dir`
   :rtype: str


.. py:function:: get_output_dir()

   Get the input directory.

   :returns: :attr:`out_dir`
   :rtype: str


.. py:function:: get_pre()

   Gets the command prefix.

   :returns: :attr:`pre`
   :rtype: str


.. py:function:: set_input_dir(ind)

   Sets the input directory.

   :param ind: new input directory.
   :type ind: str


.. py:function:: set_output_dir(outd)

   Sets the output directory.

   :param outd: new output directory.
   :type outd: str


.. py:function:: set_pre(ppre)

   Sets the command prefix.

   :param ppre: new command prefix.
   :type ppre: str


.. py:class:: Order

   Bases: :py:obj:`enum.IntEnum`

   Computation orders.

   Initialize self.  See help(type(self)) for accurate signature.

   .. py:attribute:: LO
      :annotation: = 0

      Leading Order

   .. py:attribute:: NLO
      :annotation: = 1

      Next-to-Leading Order

   .. py:attribute:: NLO_PLUS_NLL
      :annotation: = 2

      Next-to-Leading Order plus Next-to-Leading Logarithms


.. py:class:: Input(order: Order, energy, particle1: int, particle2: int, slha: str, pdf_lo: str, pdf_nlo: str, mu_f=1.0, mu_r=1.0, pdfset_lo=0, pdfset_nlo=0, precision=0.01, max_iters=50, invariant_mass='auto', result='total', pt='auto', id='', model_path='/opt/MG5_aMC_v2_7_0/models/MSSMatNLO_UFO')

   Input for computation.


.. py:function:: update_slha(i: Input)

   Updates dependent parameters in Input `i`.

   Mainly concerns the `mu` value used by `madgraph`.




.. py:function:: scan(l: List[Input], var: str, range) -> List[Input]

   Scans a variable `var` over `range` in `l`.


.. py:function:: scale_scan(l: List[Input], range=3, distance=2.0)

   Scans scale by varying `mu_f` and `mu_r`.
   They take `range` values from 1/`distance` to `distance` in lograthmic spacing.
   Only points with `mu_f`=`mu_r` or `mu_r/f`=1 or `mu_r/f`=`distance` or `mu_r/f`=1/`distance` are returned.


.. py:function:: seven_point_scan(l: List[Input])

   Scans scale by varying `mu_f` and `mu_r` by factors of two excluding relative factors of 4.


.. py:function:: pdf_scan(l: List[Input])

   Scans NLO PDF sets.

   The PDF sets are infered from `lhapdf.getPDFSet` with the argument of `pdfset_nlo`.


.. py:function:: change_where(l: List[Input], dicts: dict, **kwargs)

   Applies the values of `dicts` if the key value pairs in `kwargs` agree with a member of the list `l`.

   The changes only applied to the matching list members.


.. py:function:: scan_invariant_mass(l: List[Input], diff, points, low=0.001)

   Logarithmic `invariant_mass` scan close to the production threshold.


.. py:function:: mass_scan(l: List[Input], var: int, range, diff_L_R=None) -> List[Input]

   Scans the PDG identified mass `var` over `range` in the list `l`.
   `diff_L_R` allows to set a fixed difference between masses of left- and right-handed particles.


.. py:function:: slha_scan(l: List[Input], block, var, range: List) -> List[Input]

   Scan a generic


.. py:function:: slha_scan_rel(l: List[Input], lambdas, range: List) -> List[Input]

   Scan a generic slha variable.


.. py:function:: LD2DL(l: List)

   Convert a list of objects into a dictionary of lists.

   The values of each object are first converted to a `dict` through the `__dict__` attribute.

   :param l: list of objects.
   :type l: List

   :returns: dictionary of numpy arrays.
   :rtype: dict

   .. rubric:: Examples

   >>> class Param:
   ...      def __init__(self,a,b,c):
   ...         self.a = a
   ...         self.b = b
   ...         self.c = c
   >>> LD2DL([ Param(1,2,3), Param(4,5,6) , Param(7,8,9) ])
   {'a': array([1, 4, 7]), 'b': array([2, 5, 8]), 'c': array([3, 6, 9])}


.. py:data:: required_numerical_uncertainty_factor
   :annotation: = 10

   If the numerical uncertainty is :attr:`required_numerical_uncertainty_factor` times higher than the scale or pdf uncertainty a warning is shown.

.. py:class:: Result(lo=None, nlo=None, nlo_plus_nll=None)

   General result class.

   :ivar LO: Leading Order result. Defaults to None.
   :vartype LO: :obj:`double`
   :ivar NLO: Next-to-Leading Order result. Defaults to None.
   :vartype NLO: :obj:`double`
   :ivar NLO_PLUS_NLL: Next-to-Leading Order plus Next-to-Leading Logarithm result. Defaults to None.
   :vartype NLO_PLUS_NLL: :obj:`double`
   :ivar K_LO: LO divided by LO.
   :vartype K_LO: :obj:`double`
   :ivar K_NLO: NLO divided by LO result.
   :vartype K_NLO: :obj:`double`
   :ivar K_NLO_PLUS_NLL: NLO+NLL divided by LO.
   :vartype K_NLO_PLUS_NLL: :obj:`double`
   :ivar NLO_PLUS_NLL_OVER_NLO: NLO+NLL divided by NLO.

   :vartype NLO_PLUS_NLL_OVER_NLO: :obj:`double`

   Sets given and computes dependent ``Attributes``.

   :param lo: corresponds to :attr:`LO`.
   :type lo: :obj:`double`
   :param nlo: corresponds to :attr:`NLO`.
   :type nlo: :obj:`double`
   :param nlo_plus_nll: corresponds to :attr:`NLO_PLUS_NLL`.
   :type nlo_plus_nll: :obj:`double`


.. py:function:: pdf_error(li, dl, confidence_level=90)

   Computes Parton Density Function (PDF) uncertainties through :func:`lhapdf.set.uncertainty`.

   :param li: Input list.
   :type li: :obj:`list` of :class:`Input`
   :param dl: :class:`Result` dictionary with lists per entry.
   :type dl: :obj:`dict`
   :param confidence_level: Confidence Level for PDF uncertainty
   :type confidence_level: :obj:`double`

   :returns:

             Modified `dl` with new `LO`/`NLO`/`NLO_PLUS_NLL` _ `PDF`/`PDF_CENTRAL`/`PDF_ERRPLUS`/`PDF_ERRMINUS`/`PDF_ERRSYM` entries.
                 - `LO`/`NLO`/`NLO_PLUS_NLL` _ `PDF` contains a symmetrized :mod:`uncertainties` object.
   :rtype: :obj:`dict`


.. py:function:: scale_error(li, dl)

   Computes seven-point scale uncertainties from the results where the renormalization and factorization scales are varied by factors of 2 and  relative factors of four are excluded (cf. :meth:`seven_point_scan`).

   :param li: Input list.
   :type li: :obj:`list` of :class:`Input`
   :param dl: :class:`Result` dictionary with lists per entry.
   :type dl: :obj:`dict`

   :returns:

             Modified `dl` with new `LO`/`NLO`/`NLO_PLUS_NLL` _ `SCALE`/`SCALE_ERRPLUS`/`SCALE_ERRMINUS`/`SCALE_ERRSYM` entries.
                 - `LO`/`NLO`/`NLO_PLUS_NLL` _ `SCALE` contains a symmetrized :mod:`uncertainties` object.
   :rtype: :obj:`dict`


.. py:function:: combine_errors(dl)

   Combines seven-point scale uncertainties and pdf uncertainties from the results by Pythagorean addition.

   .. note:: Running :func:`scale_errors` and :func:`pdf_errors` before is necessary.

   :param dl: :class:`Result` dictionary with lists per entry.
   :type dl: :obj:`dict`

   :returns:

             Modified `dl` with new `LO`/`NLO`/`NLO_PLUS_NLL` _ `COMBINED`/`ERRPLUS`/`ERRMINUS` entries.
                 - `LO`/`NLO`/`NLO_PLUS_NLL` _ `COMBINED` contains a symmetrized :mod:`uncertainties` object.
   :rtype: :obj:`dict`


.. py:function:: LD2DL(l: List)

   Convert a list of objects into a dictionary of lists.

   The values of each object are first converted to a `dict` through the `__dict__` attribute.

   :param l: list of objects.
   :type l: List

   :returns: dictionary of numpy arrays.
   :rtype: dict

   .. rubric:: Examples

   >>> class Param:
   ...      def __init__(self,a,b,c):
   ...         self.a = a
   ...         self.b = b
   ...         self.c = c
   >>> LD2DL([ Param(1,2,3), Param(4,5,6) , Param(7,8,9) ])
   {'a': array([1, 4, 7]), 'b': array([2, 5, 8]), 'c': array([3, 6, 9])}


.. py:function:: get_name(id: int) -> str

   Get the latex name of a particle.

   :param id: PDG Monte Carlo identifier for the particle.
   :type id: int

   :returns: Latex name.
   :rtype: str

   .. rubric:: Examples

   >>> get_name(21)
   'g'
   >>> get_name(1000022)
   '\\tilde{\\chi}_{1}^{0}'


.. py:function:: get_LR_partner(id: int) -> Tuple[int, int]

   Transforms a PDG id to it's left-right partner.

   :param id: PDG Monte Carlo identifier for the particle.
   :type id: int

   :returns: First int is -1 for Left and 1 for Right. Second int is the PDG id.
   :rtype: tuple

   .. rubric:: Examples

   >>> get_LR_partner(1000002)
   (-1, 2000002)


.. py:function:: namehash(n: any) -> str

   Creates a sha256 hash from the objects string representation.

   :param n: object.
   :type n: any

   :returns: sha256 of object.
   :rtype: str

   .. rubric:: Examples

   >>> p = {'a':1,'b':2}
   >>> str(p)
   "{'a': 1, 'b': 2}"
   >>> namehash(str(p))
   '3dffaea891e5dbadb390da33bad65f509dd667779330e2720df8165a253462b8'
   >>> namehash(p)
   '3dffaea891e5dbadb390da33bad65f509dd667779330e2720df8165a253462b8'


.. py:data:: lhapdf_id_name
   :annotation: :dict

   Dictionary of lhapdf names for given id.

.. py:data:: lhapdf_name_id
   :annotation: :dict

   Dictionary of lhapdf id for given name.

   Inversion of :attr:`lhapdf_id_name`.

.. py:function:: lhapdf_id_to_name(lid: int) -> str

   Converts a LHAPDF id to the sets name.

   :param lid: LHAPDF set id.
   :type lid: int

   :returns: name of the LHAPDF set.
   :rtype: str

   .. rubric:: Examples

   >>> lhapdf_id_to_name(30101175)
   'EPPS16_B_90CL_Au_hess'


.. py:function:: lhapdf_name_to_id(name: str) -> int

   Converts a LHAPDF name to the sets id.

   :param name: LHAPDF set name.
   :type name: str

   :returns: id of the LHAPDF set.
   :rtype: int

   .. rubric:: Examples

   >>> lhapdf_name_to_id("EPPS16_B_90CL_Au_hess")
   30101175


.. py:class:: Input(order: Order, energy, particle1: int, particle2: int, slha: str, pdf_lo: str, pdf_nlo: str, mu_f=1.0, mu_r=1.0, pdfset_lo=0, pdfset_nlo=0, precision=0.01, max_iters=50, invariant_mass='auto', result='total', pt='auto', id='', model_path='/opt/MG5_aMC_v2_7_0/models/MSSMatNLO_UFO')

   Input for computation.


.. py:function:: get_input_dir()

   Get the input directory.

   :returns: :attr:`in_dir`
   :rtype: str


.. py:function:: get_name(id: int) -> str

   Get the latex name of a particle.

   :param id: PDG Monte Carlo identifier for the particle.
   :type id: int

   :returns: Latex name.
   :rtype: str

   .. rubric:: Examples

   >>> get_name(21)
   'g'
   >>> get_name(1000022)
   '\\tilde{\\chi}_{1}^{0}'


.. py:function:: tex_table(dict_list, key, fname, scale=True, pdf=True, yscale=1.0)


.. py:function:: title(axe, i: hepi.input.Input, scenario='', diff_L_R=None, extra='', **kwargs)


.. py:function:: energy_plot(dict_list, y, yscale=1.0, xaxis='E [GeV]', yaxis='$\\sigma$ [pb]', label=None, **kwargs)


.. py:function:: combined_energy_plot(dict_list, t, **kwargs)


.. py:function:: combined_plot(func, dict_list, t, *args, label=None, fill=False, fmt='.', interpolate=True, **kwargs)


.. py:function:: get_mass(l, id)


.. py:function:: mass_plot(dict_list, y, part, logy=True, yaxis='$\\sigma$ [pb]', yscale=1.0, label=None, **kwargs)


.. py:function:: mass_vplot(dict_list, y, part, logy=True, yaxis='$\\sigma$ [pb]', yscale=1.0, label=None, mask=None, **kwargs)


.. py:function:: plot(dict_list, x, y, label=None, xaxis='E [GeV]', yaxis='$\\sigma$ [pb]', ratio=False, K=False, K_plus_1=False, logy=True, yscale=1.0, mask=None, **kwargs)


.. py:function:: index_open(var, idx)


.. py:function:: slha_data(li, index_list)


.. py:function:: slha_plot(li, x, y, **kwargs)


.. py:function:: vplot(x, y, label=None, xaxis='E [GeV]', yaxis='$\\sigma$ [pb]', logy=True, yscale=1.0, interpolate=True, plot_data=True, data_color=None, mask=-1, fill=False, data_fmt='.', fmt='-', **kwargs)


.. py:function:: mass_mapplot(dict_list, part1, part2, z, logz=True, zaxis='$\\sigma$ [pb]', zscale=1.0, label=None)


.. py:function:: mapplot(dict_list, x, y, z, xaxis=None, yaxis=None, zaxis=None, **kwargs)


.. py:function:: map_vplot(vx, vy, vz, xaxis=None, yaxis=None, zaxis=None, logz=True, zscale=1.0)


.. py:data:: fig
   

   

.. py:data:: axs
   

   

.. py:data:: lines
   :annotation: = []

   

.. py:data:: labels
   :annotation: = []

   

.. py:function:: err_plt(axes, x, y, label=None, error=False)


.. py:function:: scale_plot(dict_list, vl, seven_point_band=False, cont=False, error=True, li=None, plehn_color=False, yscale=1.0, unit='pb', **kwargs)


.. py:function:: central_scale_plot(dict_list, vl, cont=False, error=True, yscale=1.0, unit='pb')


.. py:function:: mass_and_K_plot(dl, li, p, scale=False, pdf=False, plehn=True, combined=False, cont=False, figsize=(6, 8), **kwargs)


.. py:function:: mass_and_ratio_plot(dl, li, p, scale=False, pdf=False, combined=False, cont=False, figsize=(6, 4), plot_data=True, fill=True, unit='pb', yscale=1.0, ylim=None, **kwargs)


.. py:data:: package
   :annotation: = hepi

   

.. py:data:: version
   

   

.. py:data:: __version__
   

   

